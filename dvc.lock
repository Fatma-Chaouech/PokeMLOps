schema: '2.0'
stages:
  split:
    cmd: mlflow run src/splitting -e split-data --experiment-name=PokeClassifier
    deps:
    - path: data/raw
      md5: 165175d2d516d909c176dff0cddb2894.dir
      size: 298144576
      nfiles: 1930
    - path: src/splitting
      md5: c8f7c45b47bee652cc3ac625fb53226e.dir
      size: 6293
      nfiles: 22
    params:
      params.yaml:
        split.output: data/splits
        split.random_state: 42
        split.root: data/raw
        split.train_percentage: 0.7
        split.val_percentage: 0.15
    outs:
    - path: data/splits
      md5: b3e21ca0858d62f3b441f1c4814cf92f.dir
      size: 298144576
      nfiles: 1930
  preprocess@train:
    cmd: mlflow run src/preprocessing -e preprocess-data --experiment-name=PokeClassifier
      -P phase=train -P input_path=data/splits -P output=data/preprocessed
    deps:
    - path: data/splits/train
      md5: 8097afaaac1bdfd484549c61adfb46a8.dir
      size: 188447585
      nfiles: 1198
    - path: src/preprocessing
      md5: 5bc0c192a874e0e483ea190e249dd4fb.dir
      size: 5030
      nfiles: 6
    outs:
    - path: data/preprocessed/train
      md5: 24a9ed37db26dbd50d7cffe56eb3ef48.dir
      size: 70963852
      nfiles: 1181
  preprocess@val:
    cmd: mlflow run src/preprocessing -e preprocess-data --experiment-name=PokeClassifier
      -P phase=val -P input_path=data/splits -P output=data/preprocessed
    deps:
    - path: data/splits/val
      md5: b939370d88d54ca2af7872c10001d61c.dir
      size: 53902001
      nfiles: 366
    - path: src/preprocessing
      md5: 5bc0c192a874e0e483ea190e249dd4fb.dir
      size: 5030
      nfiles: 6
    outs:
    - path: data/preprocessed/val
      md5: 35c0a80cc9f412b4d29518de0f08b052.dir
      size: 22868006
      nfiles: 361
  preprocess@test:
    cmd: mlflow run src/preprocessing -e preprocess-data -P phase=test -P input_path=data/splits
      -P output=data/preprocessed
    deps:
    - path: data/splits/test
      md5: c054a8e1d702159e10822ddf15d2094b.dir
      size: 325450236
      nfiles: 3480
    - path: src/preprocessing
      md5: 31833ffce099cd3d806cc8769b66f8a1.dir
      size: 2831
      nfiles: 4
    outs:
    - path: data/preprocessed/test
      md5: ee7ba56efd61f26049acdb1a73c3cff5.dir
      size: 228990717
      nfiles: 3476
  train:
    cmd: mlflow run src/training -e train-classifier --experiment-name=PokeClassifier
      -P experiment_name=PokeClassifier -P train=data/preprocessed/train -P val=data/preprocessed/val
      -P model_path=saved_models -P model_name=model.pt -P num_epochs=3 -P batch_size=8
      -P learning_rate=0.001
    deps:
    - path: data/preprocessed/train
      md5: 24a9ed37db26dbd50d7cffe56eb3ef48.dir
      size: 70963852
      nfiles: 1181
    - path: data/preprocessed/val
      md5: 35c0a80cc9f412b4d29518de0f08b052.dir
      size: 22868006
      nfiles: 361
    - path: src/training
      md5: ea4c3c9addd6bd9e7da55a460b01a46e.dir
      size: 8375
      nfiles: 4
